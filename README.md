# Trud_Vecherin
 
## Библиотеки

- library(tidyverse) - тиблы и пайплайн
- library(psych) - факторные анализы
- library(lavaan) - структурное моделирование
- library(semPlot) - строить график факторных анализов
- library(GPArotation) - для вращений в факторных анализах
- library(data.table) - таблички
- library(lavaanPlot) - график для структурных моделей
- library(rstatix) - для т-тестов
 
## Cleaning_data

### Готовимся к работе
Импортируем библиотеки и данные

### Чистим данные
Переименовываем, меняем типы данных, считаем суммы

## Anal_1

### Импорт библиотек
Импортируем библиотеки

### Подготовка
Импортируем данные

Смотрим распредление демографических данных

Определяем нормальность
Удаление столбцов с сильным отхождением от нормальности

### МОДЕЛЬ 1
Смотрим надёжность (альфа Кронбаха)

Смотрим пригодность для факторного анализа (KMO)
Удаляем выбивающиеся вопросы

Смотрим надёжность (альфа Кронбаха)

Смотрим пригодность для факторного анализа (KMO)

Проводим эксплаторный факторный анализ
Определеям с помощью графика каменистой осыпи и симмуляционного анализа оптимальное количество факторо: 1 или 3-4
Берём 4 из-за теории и проверяем -> нагрузки не совпали с ожиданиями

Проводим КФА
Смотрим fit-measures

Оставляем 5-6 самых нагруженных вопросов
Удаляем из тибла откинутые пункты, пересчитываем суммы
Считаем альфу Кронбаха и KMO
Всё хорошо, даже лучше стало

### МОДЕЛЬ 2

Проводим эксплаторный факторный анализ
Определеям с помощью графика каменистой осыпи и симмуляционного анализа оптимальное количество факторо: 1 или 3-4
Берём 4 из-за теории и проверяем -> нагрузки не совпали с ожиданиями, но уже ближе

Проводим КФА
Смотрим fit-measures

Строим визуализацию
Смотрим, какие индексы модификации предлагает Lavaan
Не добавляем их - расхождение с теорий

### МОДЕЛЬ 3

Пробуем ESEM
Определяем кол-во факторов (3, так как на 4 фактор есть только один item, который, как нам кажется подойдёт и к первому фактору)
Задаём якоря, готовим матрицу с данными в нужном формате
Задаём функцию
Генерируем модель
Смотрим стандартные нагрузки, с фильтром больше или равно 0.7

Анализируем получившиеся факторы:
1) 9,10,12,14,15
2) 1,2,3,5,8
3) 17,19,20

Обратимся теперь к теории, что это могут быть за факторы
1) 9,10,12,14,15,21 - про качество исполнения работы (ну будто бы тоже неплохо)
2) 1,2,3,5,8 - польза для людей (ну, ожидаемо)
3) 17,19,20 - связь с колегами, кайф

Проверим модель ESEM в КФА и сравним со второй моделью
Модель с тремя факторами предпочтительнее

Удаляем лишние вопросы из тибла

Посмотрим индексы модификации
Lavaan предлагает учесть следующие взаимодействия:
  Ковариация a4 и a5; a4 и a10
  Включить a1 и а4 в F1
Я считаю оправданным учесть ковариацию a4 и a5 - это две строны одного вопроса (4 - индивидуальная, 5 - общественная)
Ковариацию а4 и a10 учитывать не будем
Nеоретически включить a1 и a4 в F1 можно, но первый пункт выходит перегруженым, поэтому не буду

Смотрим метрики после учёта ковариации

Строим график

Пересчитываем суммы с учётом весов

### Сохраним результаты для дальнешей работы:

Сохраняем результат в файл

### Проверим методику "Сокращенная версия опросника проактивный копиг"

Смотрим альфу Кронбаха, KMO
Проводим КФА смотрим метрики фита

### Проверим методику "Удовлетворенность трудом"

Смотрим альфу Кронбаха, KMO
Проводим КФА смотрим метрики фита

## Anal_2

### Импорт библиотек

Импортируем библиотеки

### Конвергентная валидность

Строим матрицу корреляций
1) F1 и удовлетворённость процессом и содержанием труда
2) F2 и удовлетворённость организацией труда, процессом и содержанием труда; проактивный и превентивный копинг
3) F3 и удовлетворённость коллективом; поиск эмоциональной и инструментальной поддержкой

### Посмотрим соц-дем

Пол
Нет значимых связей

Возраст
Значимая слабая негативная связь первого фактора и возраста

### Глубже исследуем связь первого фактора и удовлетворённости трудом

Создаём категориальную переменную для первого фактора
Разобъём на три категории по 15 и 85 перцентилям

Проведём т-тест двух крайних групп и всех видов удовлетворённости

Удовлетворенность заработной платой - незначимо
Удовлетворенность организацией труда - значимо (moderate)
Удовлетворенность руководством - значимо (moderate)
Удовлетворенность коллективом - значимо (large)
Удовлетворенность процессом и содержанием труда - значимо (large)

## anket.csv

Сырые данные

## anket_clean.csv

Подготовленные данные

## anket_an_1.csv

Данные с итогами основого анализа
